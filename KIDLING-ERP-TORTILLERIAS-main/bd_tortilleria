CREATE TABLE roles (
id_rol INT PRIMARY KEY AUTO_INCREMENT,
nombre_rol VARCHAR(50) NOT NULL UNIQUE,
descripcion_rol TEXT,
fecha_creacion TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
fecha_actualizacion TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

CREATE TABLE permisos (
id_permiso INT PRIMARY KEY AUTO_INCREMENT,
nombre_permiso VARCHAR(50) NOT NULL UNIQUE,
descripcion_permiso TEXT,
fecha_creacion TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
fecha_actualizacion TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

CREATE TABLE rol_permisos  (
id_rol_permiso INT PRIMARY KEY AUTO_INCREMENT,
id_rol INT NOT NULL,
id_permiso INT NOT NULL,
fecha_creacion TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
FOREIGN KEY (id_rol) REFERENCES roles(id_rol),
FOREIGN KEY (id_permiso) REFRENCE permisos(id_permiso)
);


CREATE TABLE usuarios (
ID_USUARIO serial PRIMARY KEY ,
nombre_usuario VARCHAR(60) NOT NULL UNIQUE,
correro_usuario VARCHAR(100) NOT NULL UNIQUE,
contrase√±a_usuario TEXT NOT NULL,
primer_apellido VARCHAR(50),
segundo_apellido VARCHAR(50),
fecha_creacion TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
fecha_actualizacion TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
ultimo_login TIMESTAMP,
status VARCHAR(20) DEFAULT 'activo',
id_rol INT NOT NULL,
FOREIGN KEY (id_rol) REFERENCES roles(id_rol)
);



INSERT INTO roles (nombre_rol, descripcion_rol) VALUES
('administrador general', 'acceso total al sistema y configuracion'),
('administrador', 'acceso total al sistema y configuracion'),
('ventas', 'acceso limitado a ventas e inventarios'),
('distribuidor', 'acceso limitado a ventas y distribucion');

INSERT INTO tortilleria.permisos(nombre_permiso, descripcion_permiso)VALUES
('REQ001','gestion de inventario'),
('REQ002','gestion de ventas'),
('REQ003','recursos humanos'),
('REQ004','dsitribucion'),
('REQ005','contabilidad y finanzas')
('REQ006','reportes y administracion');
 
 
INSERT INTO rol_permisos(id_rol,id_permiso) VALUES 
(1,1),(1,2),(1,3),(1,4),(1,5),(1,6),
(2,1),(2,2),(2,3),(2,4),(2,5),(2,6),
(3,1),(3,2),(3,3),(3,4),(3,5),
(4,1),(4,2);
